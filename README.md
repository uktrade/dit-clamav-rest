# DIT ClamAV REST interface

This is a python-based REST interface to ClamD inspired by https://github.com/solita/clamav-rest

### Authentication

The /scan endpoint requires basic HTTP authentication.  Authentication details are passed in via the APPLICATION_USERS environment variable which should be in the format:

    "username1::password\nusername2::password\nusername3::password"

Where `password` is a pbkdf2_sha256 hash generated by Python's passlib.  Assuming you have passlib installed, you can generate a password hash like this:

    python -c "from passlib import hash; print(hash.pbkdf2_sha256.hash('password'))"

## Development Tips

###Â Debugging the clamav docker image

Expose the ports to the container by adding to the `docker-compose.yml` file.

    ports: 
      - 3310:3310

Basic clamav ping test

    echo PING | nc localhost 3310
    PONG